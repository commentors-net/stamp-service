<Window x:Class="StampService.AdminGUI.Views.SecretManagerView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="Secret Manager" 
        Height="700" Width="1000"
        WindowStartupLocation="CenterOwner"
     Background="{DynamicResource MaterialDesignPaper}"
   FontFamily="{materialDesign:MaterialDesignFont}">

    <Grid>
     <Grid.RowDefinitions>
       <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
</Grid.RowDefinitions>

        <!-- Header -->
  <materialDesign:ColorZone Grid.Row="0" Mode="PrimaryMid" Padding="16">
  <DockPanel>
   <StackPanel Orientation="Horizontal">
      <materialDesign:PackIcon Kind="Key" Width="28" Height="28" VerticalAlignment="Center" Margin="0,0,12,0"/>
<TextBlock Text="Secret Manager" FontSize="20" VerticalAlignment="Center" FontWeight="Medium"/>
   </StackPanel>
            
       <StackPanel Orientation="Horizontal" DockPanel.Dock="Right">
      <Button Content="+ New Secret" 
 Click="NewSecretButton_Click"
Style="{StaticResource MaterialDesignRaisedLightButton}"
      Margin="0,0,8,0"/>
   <Button Style="{StaticResource MaterialDesignIconButton}" 
           ToolTip="Refresh" 
  Click="RefreshButton_Click">
      <materialDesign:PackIcon Kind="Refresh"/>
          </Button>
   </StackPanel>
      </DockPanel>
 </materialDesign:ColorZone>

   <!-- Main Content -->
  <Grid Grid.Row="1" Margin="16">
   <Grid.RowDefinitions>
         <RowDefinition Height="Auto"/>
 <RowDefinition Height="Auto"/>
    <RowDefinition Height="*"/>
  <RowDefinition Height="Auto"/>
   </Grid.RowDefinitions>

<!-- Search Bar -->
 <materialDesign:Card Grid.Row="0" Padding="12" Margin="0,0,0,8">
         <Grid>
          <Grid.ColumnDefinitions>
   <ColumnDefinition Width="*"/>
   <ColumnDefinition Width="Auto"/>
     </Grid.ColumnDefinitions>
     
       <TextBox x:Name="SearchBox"
Grid.Column="0"
      materialDesign:HintAssist.Hint="Search secrets..."
    Style="{StaticResource MaterialDesignOutlinedTextBox}"
     TextChanged="SearchBox_TextChanged"/>
  
        <Button Grid.Column="1"
         Style="{StaticResource MaterialDesignIconButton}"
  ToolTip="Search"
Margin="8,0,0,0">
 <materialDesign:PackIcon Kind="Magnify"/>
      </Button>
    </Grid>
 </materialDesign:Card>

   <!-- Summary -->
   <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,12">
       <materialDesign:PackIcon Kind="ShieldLock" VerticalAlignment="Center" Margin="0,0,8,0"/>
  <TextBlock x:Name="SecretCountText" 
       Text="Loading secrets..." 
     VerticalAlignment="Center"
       FontSize="14"/>
      </StackPanel>

     <!-- Data Grid -->
 <DataGrid x:Name="SecretsDataGrid"
   Grid.Row="2"
   AutoGenerateColumns="False"
   CanUserAddRows="False"
 CanUserDeleteRows="False"
IsReadOnly="True"
 SelectionMode="Single"
     materialDesign:DataGridAssist.CellPadding="8"
 materialDesign:DataGridAssist.ColumnHeaderPadding="8">
<DataGrid.Columns>
   <DataGridTextColumn Header="Name" Binding="{Binding Name}" Width="*" MinWidth="150"/>
   <DataGridTextColumn Header="Type" Binding="{Binding Type}" Width="120"/>
    <DataGridTextColumn Header="Network" Binding="{Binding Network}" Width="120"/>
         <DataGridTextColumn Header="Address" Binding="{Binding Address}" Width="150"/>
    <DataGridTextColumn Header="Created" Binding="{Binding CreatedAtFormatted}" Width="130"/>
</DataGrid.Columns>
  </DataGrid>

            <!-- Action Buttons -->
   <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,12,0,0">
    <Button Content="View Details"
   Click="ViewDetailsButton_Click"
         Style="{StaticResource MaterialDesignOutlinedButton}"
Margin="0,0,8,0"/>
   <Button Content="Delete and Recreate"
        Click="DeleteAndRecreateButton_Click"
      Style="{StaticResource MaterialDesignOutlinedButton}"
         Margin="0,0,8,0"
      ToolTip="Delete secret and generate a new one"/>
         <Button Content="Export"
     Click="ExportButton_Click"
    Style="{StaticResource MaterialDesignOutlinedButton}"
Margin="0,0,8,0"/>
          <Button Content="Delete"
       Click="DeleteButton_Click"
Style="{StaticResource MaterialDesignRaisedButton}"
     Background="{DynamicResource MaterialDesignErrorBrush}"/>
  </StackPanel>
  </Grid>

      <!-- Loading Overlay -->
      <Grid x:Name="LoadingOverlay" 
     Grid.Row="1" 
  Background="#AA000000" 
        Visibility="Collapsed">
   <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
<ProgressBar Style="{StaticResource MaterialDesignCircularProgressBar}"
      Value="0"
       IsIndeterminate="True"
        Width="60"
 Height="60"/>
 <TextBlock Text="Loading secrets..." 
Foreground="White" 
  FontSize="14" 
Margin="0,16,0,0"
   HorizontalAlignment="Center"/>
  </StackPanel>
  </Grid>

        <!-- Footer -->
        <materialDesign:ColorZone Grid.Row="2" Mode="PrimaryLight" Padding="12">
  <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
    <Button Content="Close" 
 Click="CloseButton_Click"
    Style="{StaticResource MaterialDesignFlatButton}"/>
  </StackPanel>
 </materialDesign:ColorZone>
    </Grid>
</Window>
