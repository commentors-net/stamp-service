<Window x:Class="StampService.AdminGUI.Views.AuditLogViewer"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="Audit Log Viewer" Height="700" Width="1100"
 WindowStartupLocation="CenterOwner"
    Background="{DynamicResource MaterialDesignPaper}"
  FontFamily="{materialDesign:MaterialDesignFont}">

    <Grid>
   <Grid.RowDefinitions>
     <RowDefinition Height="Auto"/>
          <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
  <RowDefinition Height="Auto"/>
      </Grid.RowDefinitions>

        <!-- Header -->
        <materialDesign:ColorZone Grid.Row="0" Mode="PrimaryMid" Padding="16">
<DockPanel>
                <StackPanel Orientation="Horizontal">
               <materialDesign:PackIcon Kind="FileDocument" Width="28" Height="28" VerticalAlignment="Center" Margin="0,0,12,0"/>
      <TextBlock Text="Audit Log Viewer" FontSize="20" VerticalAlignment="Center" FontWeight="Medium"/>
           </StackPanel>
             
    <StackPanel Orientation="Horizontal" DockPanel.Dock="Right">
       <Button Content="?? Open Log Folder" 
       Click="OpenLogFolderButton_Click"
           Style="{StaticResource MaterialDesignRaisedLightButton}"
   Margin="0,0,8,0"/>
         <Button Content="?? Export" 
                Click="ExportButton_Click"
   Style="{StaticResource MaterialDesignRaisedLightButton}"
       Margin="0,0,8,0"/>
          <Button Style="{StaticResource MaterialDesignIconButton}" 
            ToolTip="Refresh" 
       Click="RefreshButton_Click">
              <materialDesign:PackIcon Kind="Refresh"/>
    </Button>
     </StackPanel>
 </DockPanel>
      </materialDesign:ColorZone>

        <!-- Filter Panel -->
        <materialDesign:Card Grid.Row="1" Margin="16,16,16,8" Padding="16">
        <Grid>
         <Grid.RowDefinitions>
    <RowDefinition Height="Auto"/>
    <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
     <Grid.ColumnDefinitions>
               <ColumnDefinition Width="*"/>
         <ColumnDefinition Width="*"/>
  <ColumnDefinition Width="*"/>
      <ColumnDefinition Width="Auto"/>
    </Grid.ColumnDefinitions>

          <!-- Search -->
      <TextBox x:Name="SearchTextBox"
      Grid.Row="0" Grid.Column="0"
   materialDesign:HintAssist.Hint="Search logs..."
     Style="{StaticResource MaterialDesignOutlinedTextBox}"
 Margin="0,0,8,0"
    TextChanged="SearchTextBox_TextChanged"/>

       <!-- Event Type Filter -->
    <ComboBox x:Name="EventTypeComboBox"
      Grid.Row="0" Grid.Column="1"
         materialDesign:HintAssist.Hint="Event Type"
            Style="{StaticResource MaterialDesignOutlinedComboBox}"
     Margin="0,0,8,0"
        >
  <ComboBoxItem Content="All Events" IsSelected="True"/>
   <ComboBoxItem Content="Sign Operations"/>
    <ComboBoxItem Content="Share Creation"/>
<ComboBoxItem Content="Recovery Events"/>
           <ComboBoxItem Content="Auth Failures"/>
       <ComboBoxItem Content="Security Events"/>
    </ComboBox>

<!-- Date Range -->
                <ComboBox x:Name="DateRangeComboBox"
                Grid.Row="0" Grid.Column="2"
    materialDesign:HintAssist.Hint="Date Range"
   Style="{StaticResource MaterialDesignOutlinedComboBox}"
    Margin="0,0,8,0"
             >
            <ComboBoxItem Content="Today" IsSelected="True"/>
     <ComboBoxItem Content="Last 7 Days"/>
  <ComboBoxItem Content="Last 30 Days"/>
          <ComboBoxItem Content="All Time"/>
 </ComboBox>

      <!-- Apply Filter Button -->
<Button Grid.Row="0" Grid.Column="3"
             Content="APPLY"
          Style="{StaticResource MaterialDesignRaisedButton}"
   Click="ApplyFilterButton_Click"
             VerticalAlignment="Bottom"
Width="100"/>

         <!-- Summary -->
       <StackPanel Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="4" 
      Orientation="Horizontal" Margin="0,12,0,0">
           <materialDesign:PackIcon Kind="Information" VerticalAlignment="Center" Margin="0,0,8,0"/>
           <TextBlock x:Name="SummaryTextBlock" 
   Text="Loading logs..." 
      VerticalAlignment="Center"
    FontSize="13"/>
           </StackPanel>
            </Grid>
   </materialDesign:Card>

        <!-- Log Display -->
        <DataGrid x:Name="LogDataGrid"
             Grid.Row="2"
  Margin="16,0,16,0"
       AutoGenerateColumns="False"
   CanUserAddRows="False"
     CanUserDeleteRows="False"
  IsReadOnly="True"
     SelectionMode="Single"
       materialDesign:DataGridAssist.CellPadding="8"
                materialDesign:DataGridAssist.ColumnHeaderPadding="8"
         MouseDoubleClick="LogDataGrid_MouseDoubleClick">
            <DataGrid.Columns>
          <DataGridTextColumn Header="Timestamp" Binding="{Binding Timestamp}" Width="150"/>
   <DataGridTextColumn Header="Level" Binding="{Binding Level}" Width="80"/>
        <DataGridTextColumn Header="Event Type" Binding="{Binding EventType}" Width="150"/>
      <DataGridTextColumn Header="Details" Binding="{Binding Details}" Width="*" MinWidth="300"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Footer -->
        <materialDesign:ColorZone Grid.Row="3" Mode="PrimaryLight" Padding="12">
            <DockPanel>
<TextBlock x:Name="FooterTextBlock" 
        Text="Log Location: C:\ProgramData\StampService\Logs\audit.log" 
              VerticalAlignment="Center"
         FontSize="11"
             Opacity="0.7"
              DockPanel.Dock="Left"/>
      
          <Button Content="Close" 
      Click="CloseButton_Click"
  Style="{StaticResource MaterialDesignFlatButton}"
       HorizontalAlignment="Right"/>
        </DockPanel>
  </materialDesign:ColorZone>
    </Grid>
</Window>

